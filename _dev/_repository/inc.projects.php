<?php $paged = ( get_query_var( 'paged' ) ) ? absint( get_query_var( 'paged' ) ) : 1; $projects = array('post_type' => 'post','category_name' => 'projects','posts_per_page' => 10,'orderby' => 'title','order' => 'asc','paged' => $paged); $projects_query = new WP_Query( $projects ); ?><?php if ( $projects_query->have_posts() ) : while ( $projects_query->have_posts() ) : $projects_query->the_post(); ?><article id="post-<?php the_ID(); ?>" <?php post_class('row project'); ?>><?php if (has_post_thumbnail()) { ?><div class="thumbnail three columns"><a href="<?php the_permalink(); ?>"><?php the_post_thumbnail('project'); ?></a></div><div class="description thirteen columns"><?php }; ?><h2 class="title"><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2><?php $content = apply_filters('the_content', get_the_content());$content = str_replace(']]>', ']]&gt;', $content);$excerpt = wp_trim_words($content, 55, '... ' ); echo $excerpt; ?><br /><a href="<?php the_permalink(); ?>" class="readmore btn">See more <i class="fa fa-angle-right"></i></a><?php if (has_post_thumbnail()) { ?></div><?php }; ?></article><?php endwhile; ?><?php if ($projects_query->max_num_pages > 1) { ?><div class="pagination"><?php global $wp_query; $big = 999999999; echo paginate_links( array('base' => str_replace($big, '%#%', esc_url(get_pagenum_link($big))),'format' => '?paged=%#%','current' => max(1, get_query_var('paged')),	'total' => $projects_query->max_num_pages, 'prev_text' => __('<i class="fa fa-angle-left"></i>'), 'next_text' => __('<i class="fa fa-angle-right"></i>'),)); ?></div><?php }; ?><?php else: ?><p>Please check back soon to see a selection of our projects.</p><?php endif; ?>


<?php // Add to functions.php - change the id number to your projects category ID /* Exclude Projects from main blog */ function goop_exclude_category($query) {if ( $query->is_home() && $query->is_main_query() ) {$query->set( 'cat', '-17' );}} add_action( 'pre_get_posts', 'goop_exclude_category' );

// Add to functions.php - change the id number to your projects category ID /* Exclude Projects from archives */ add_filter( 'getarchives_where', 'customarchives_where' );add_filter( 'getarchives_join', 'customarchives_join' ); function customarchives_join( $x ) {global $wpdb;return $x . " INNER JOIN $wpdb->term_relationships ON ($wpdb->posts.ID = $wpdb->term_relationships.object_id) INNER JOIN $wpdb->term_taxonomy ON ($wpdb->term_relationships.term_taxonomy_id = $wpdb->term_taxonomy.term_taxonomy_id)";} function customarchives_where( $x ) {global $wpdb;$exclude = '17'; /* category id to exclude */ return $x . " AND $wpdb->term_taxonomy.taxonomy = 'category' AND $wpdb->term_taxonomy.term_id NOT IN ($exclude)";} ?>
